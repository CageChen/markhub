<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="MarkHub - Beautiful Markdown Renderer">
    <title>MarkHub - Markdown Renderer</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=Plus+Jakarta+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/chroma.css">
</head>
<body>
    <div class="app">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <svg viewBox="0 0 24 24" width="28" height="28" fill="currentColor">
                        <path d="M3 3h18v18H3V3zm16 16V5H5v14h14zM7 7h10v2H7V7zm0 4h10v2H7v-2zm0 4h7v2H7v-2z"/>
                    </svg>
                    <span class="logo-text">MarkHub</span>
                </div>
                <div class="header-actions">
                    <button class="icon-btn" id="settingsBtn" title="Manage folders">
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                            <path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22l-1.92 3.32c-.12.21-.07.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94 0 .31.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
                        </svg>
                    </button>
                    <button class="icon-btn" id="themeToggle" title="Toggle theme">
                        <svg class="icon-sun" viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                            <path d="M12 7a5 5 0 100 10 5 5 0 000-10zM12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                        </svg>
                        <svg class="icon-moon" viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                            <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="search-box">
                <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                    <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                </svg>
                <input type="text" id="searchInput" placeholder="Search files..." autocomplete="off">
            </div>
            <nav class="file-tree" id="fileTree">
                <div class="loading">Loading...</div>
            </nav>
        </aside>

        <!-- Main content -->
        <main class="main-content">
            <header class="content-header" id="contentHeader">
                <button class="sidebar-toggle" id="sidebarToggle" title="Toggle sidebar">
                    <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </button>
                <div class="breadcrumb" id="breadcrumb"></div>
            </header>
            
            <article class="content" id="content">
                <div class="welcome">
                    <div class="welcome-icon">
                        <svg viewBox="0 0 24 24" width="80" height="80" fill="currentColor">
                            <path d="M3 3h18v18H3V3zm16 16V5H5v14h14zM7 7h10v2H7V7zm0 4h10v2H7v-2zm0 4h7v2H7v-2z"/>
                        </svg>
                    </div>
                    <h1>Welcome to MarkHub</h1>
                    <p>Select a Markdown file from the sidebar to view its content.</p>
                </div>
            </article>

            <!-- TOC Sidebar -->
            <aside class="toc-sidebar" id="tocSidebar">
                <div class="toc-header">Table of Contents</div>
                <nav class="toc-nav" id="tocNav"></nav>
            </aside>
        </main>
    </div>

    <!-- Zen Mode Toggle -->
    <button class="zen-toggle-btn" id="zenToggle" title="Toggle Zen mode (Ctrl+Shift+Z)">
        <svg class="icon-zen-enter" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 3 21 3 21 9"></polyline>
            <polyline points="9 21 3 21 3 15"></polyline>
            <line x1="21" y1="3" x2="14" y2="10"></line>
            <line x1="3" y1="21" x2="10" y2="14"></line>
        </svg>
        <svg class="icon-zen-exit" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="4 14 10 14 10 20"></polyline>
            <polyline points="20 10 14 10 14 4"></polyline>
            <line x1="14" y1="10" x2="21" y2="3"></line>
            <line x1="3" y1="21" x2="10" y2="14"></line>
        </svg>
    </button>

    <!-- Connection status -->
    <div class="connection-status" id="connectionStatus">
        <span class="status-dot"></span>
        <span class="status-text">Connected</span>
    </div>

    <!-- Folder Management Modal -->
    <div class="modal-overlay" id="folderModal">
        <div class="modal">
            <div class="modal-header">
                <h2>Settings</h2>
                <button class="modal-close" id="modalClose">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Global Excludes Section -->
                <div class="settings-section">
                    <h3>Global Excludes</h3>
                    <p class="settings-hint">Patterns applied to all folders (one per line)</p>
                    <div class="form-group">
                        <textarea id="globalExclude" rows="3" placeholder="node_modules&#10;.git&#10;.svn"></textarea>
                    </div>
                    <button class="btn btn-secondary btn-sm" id="saveGlobalExcludeBtn">Save Global Excludes</button>
                </div>

                <!-- Folder List -->
                <div class="settings-section">
                    <h3>Folders</h3>
                    <div class="folder-list" id="folderList">
                        <!-- Folders will be rendered here -->
                    </div>
                </div>

                <!-- Add Folder Form -->
                <div class="add-folder-form">
                    <h3>Add New Folder</h3>
                    <div class="form-group">
                        <label for="folderPath">Folder Path</label>
                        <input type="text" id="folderPath" placeholder="/path/to/your/docs">
                    </div>
                    <div class="form-group">
                        <label for="folderAlias">Display Name (Alias)</label>
                        <input type="text" id="folderAlias" placeholder="My Documentation">
                    </div>
                    <div class="form-group">
                        <label for="folderGitRef">Git Ref <span class="label-hint">(optional, e.g. main, feature-x, abc1234)</span></label>
                        <input type="text" id="folderGitRef" placeholder="Leave empty for local filesystem">
                    </div>
                    <div class="form-group">
                        <label for="folderSubPath">Sub Path <span class="label-hint">(optional, e.g. docs, src/api)</span></label>
                        <input type="text" id="folderSubPath" placeholder="Leave empty for repository root">
                    </div>
                    <div class="form-group">
                        <label for="folderExclude">Folder Excludes <span class="label-hint">(comma-separated)</span></label>
                        <input type="text" id="folderExclude" placeholder="README.md, docs/legacy">
                    </div>
                    <button class="btn btn-primary" id="addFolderBtn">Add Folder</button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/mermaid.min.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
